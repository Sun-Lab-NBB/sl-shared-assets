from dataclasses import field, dataclass

from .vr_configuration import TrialStructure as TrialStructure

@dataclass
class ExperimentState:
    experiment_state_code: int
    system_state_code: int
    state_duration_s: float
    supports_trials: bool = ...
    reinforcing_initial_guided_trials: int = ...
    reinforcing_recovery_failed_threshold: int = ...
    reinforcing_recovery_guided_trials: int = ...
    aversive_initial_guided_trials: int = ...
    aversive_recovery_failed_threshold: int = ...
    aversive_recovery_guided_trials: int = ...

@dataclass
class BaseTrial(TrialStructure):
    trigger_type: str = ...
    cue_sequence: list[int] = field(default_factory=list)
    trial_length_cm: float = ...
    def validate_zones(self) -> None: ...

@dataclass
class WaterRewardTrial(BaseTrial):
    reward_size_ul: float = ...
    reward_tone_duration_ms: int = ...

@dataclass
class GasPuffTrial(BaseTrial):
    puff_duration_ms: int = ...
    occupancy_duration_ms: int = ...
